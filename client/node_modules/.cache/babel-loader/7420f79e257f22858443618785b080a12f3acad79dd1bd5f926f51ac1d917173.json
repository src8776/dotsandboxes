{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nconst useWebSocket = (url, username) => {\n  _s();\n  const [ws, setWs] = useState(null);\n  const [players, setPlayers] = useState([]);\n  const [message, setMessage] = useState('');\n  const [challengeStatus, setChallengeStatus] = useState(null);\n  useEffect(() => {\n    const socket = new WebSocket(url);\n    socket.onopen = () => {\n      console.log('WebSocket connected');\n      socket.send(JSON.stringify({\n        type: 'setUsername',\n        username\n      }));\n    };\n    socket.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'playerList') {\n        setPlayers(data.players);\n      } else if (data.type === 'lobbyMessage') {\n        setMessage(data.message);\n      } else if (data.type === 'challengeReceived') {\n        setMessage(`Challenge received from ${data.challenger}`);\n        setChallengeStatus('received');\n      } else if (data.type === 'gameStarted') {\n        setMessage(`Game started with ${data.opponent}`);\n      } else if (data.type === 'challengeDeclined') {\n        setMessage(`${data.challenger} declined your challenge.`);\n      }\n    };\n    socket.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n    setWs(socket);\n    return () => {\n      socket.close();\n    };\n  }, [url, username]);\n  const sendMessage = msg => {\n    if (ws && ws.readyState === WebSocket.OPEN) {\n      ws.send(JSON.stringify(msg));\n    }\n  };\n  const sendChallenge = challengedPlayer => {\n    sendMessage({\n      type: 'challenge',\n      challengedPlayer\n    });\n  };\n  const respondToChallenge = (response, challenger) => {\n    sendMessage({\n      type: 'challengeResponse',\n      response,\n      challenger\n    });\n  };\n  return {\n    players,\n    message,\n    challengeStatus,\n    sendChallenge,\n    respondToChallenge\n  };\n};\n_s(useWebSocket, \"XlQtRPWLxyR+gH8Zm0Xeaaczktw=\");\nexport default useWebSocket;","map":{"version":3,"names":["useEffect","useState","useWebSocket","url","username","_s","ws","setWs","players","setPlayers","message","setMessage","challengeStatus","setChallengeStatus","socket","WebSocket","onopen","console","log","send","JSON","stringify","type","onmessage","event","data","parse","challenger","opponent","onclose","close","sendMessage","msg","readyState","OPEN","sendChallenge","challengedPlayer","respondToChallenge","response"],"sources":["/Users/sophiacastiglione/Desktop/iste442/dots-and-boxes/client/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nconst useWebSocket = (url, username) => {\n    const [ws, setWs] = useState(null);\n    const [players, setPlayers] = useState([]);\n    const [message, setMessage] = useState('');\n    const [challengeStatus, setChallengeStatus] = useState(null);\n\n    useEffect(() => {\n        const socket = new WebSocket(url);\n\n        socket.onopen = () => {\n            console.log('WebSocket connected');\n            socket.send(JSON.stringify({ type: 'setUsername', username }));\n        };\n\n        socket.onmessage = (event) => {\n            const data = JSON.parse(event.data);\n            if (data.type === 'playerList') {\n                setPlayers(data.players);\n            } else if (data.type === 'lobbyMessage') {\n                setMessage(data.message);\n            } else if (data.type === 'challengeReceived') {\n                setMessage(`Challenge received from ${data.challenger}`);\n                setChallengeStatus('received');\n            } else if (data.type === 'gameStarted') {\n                setMessage(`Game started with ${data.opponent}`);\n            } else if (data.type === 'challengeDeclined') {\n                setMessage(`${data.challenger} declined your challenge.`);\n            }\n        };\n\n        socket.onclose = () => {\n            console.log('WebSocket disconnected');\n        };\n\n        setWs(socket);\n\n        return () => {\n            socket.close();\n        };\n    }, [url, username]);\n\n    const sendMessage = (msg) => {\n        if (ws && ws.readyState === WebSocket.OPEN) {\n            ws.send(JSON.stringify(msg));\n        }\n    };\n\n    const sendChallenge = (challengedPlayer) => {\n        sendMessage({ type: 'challenge', challengedPlayer });\n    };\n\n    const respondToChallenge = (response, challenger) => {\n        sendMessage({ type: 'challengeResponse', response, challenger });\n    };\n\n    return { players, message, challengeStatus, sendChallenge, respondToChallenge };\n};\n\nexport default useWebSocket;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}