{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nconst useWebSocket = (url, username) => {\n  _s();\n  const [ws, setWs] = useState(null);\n  const [players, setPlayers] = useState([]);\n  const [message, setMessage] = useState('');\n  const [challengeStatus, setChallengeStatus] = useState(null);\n  const [currentRoom, setCurrentRoom] = useState('lobby');\n  useEffect(() => {\n    const socket = new WebSocket(url);\n    socket.onopen = () => {\n      console.log('WebSocket connected');\n      socket.send(JSON.stringify({\n        type: 'setUsername',\n        username\n      }));\n    };\n    socket.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'playerList') {\n        setPlayers(data.players);\n      } else if (data.type === 'lobbyMessage') {\n        setMessage(data.message);\n      } else if (data.type === 'challengeReceived') {\n        setMessage(`Challenge received from ${data.challenger}`);\n        setChallengeStatus('received');\n      } else if (data.type === 'gameStarted') {\n        setMessage(`Game started with ${data.opponent}`);\n      } else if (data.type === 'challengeDeclined') {\n        setMessage(`${data.challenger} declined your challenge.`);\n      } else if (data.type === 'chatMessage') {\n        if (data.room === currentRoom) {\n          setMessage(prevMessages => prevMessages + `\\n${data.username}: ${data.message}`);\n        }\n      }\n    };\n    socket.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n    setWs(socket);\n    return () => {\n      socket.close();\n    };\n  }, [url, username]);\n  const sendMessage = msg => {\n    if (ws && ws.readyState === WebSocket.OPEN) {\n      ws.send(JSON.stringify(msg));\n    }\n  };\n  const sendChallenge = challengedPlayer => {\n    sendMessage({\n      type: 'challenge',\n      challengedPlayer\n    });\n  };\n  const respondToChallenge = (response, challenger) => {\n    sendMessage({\n      type: 'challengeResponse',\n      response,\n      challenger\n    });\n  };\n  return {\n    players,\n    message,\n    challengeStatus,\n    sendChallenge,\n    respondToChallenge\n  };\n};\n_s(useWebSocket, \"ZUK0SE+WHhE2mM19rOs2QwMz9SQ=\");\nexport default useWebSocket;","map":{"version":3,"names":["useEffect","useState","useWebSocket","url","username","_s","ws","setWs","players","setPlayers","message","setMessage","challengeStatus","setChallengeStatus","currentRoom","setCurrentRoom","socket","WebSocket","onopen","console","log","send","JSON","stringify","type","onmessage","event","data","parse","challenger","opponent","room","prevMessages","onclose","close","sendMessage","msg","readyState","OPEN","sendChallenge","challengedPlayer","respondToChallenge","response"],"sources":["/Users/sophiacastiglione/Desktop/iste442/dots-and-boxes/client/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nconst useWebSocket = (url, username) => {\n    const [ws, setWs] = useState(null);\n    const [players, setPlayers] = useState([]);\n    const [message, setMessage] = useState('');\n    const [challengeStatus, setChallengeStatus] = useState(null);\n    const [currentRoom, setCurrentRoom] = useState('lobby');\n\n    useEffect(() => {\n        const socket = new WebSocket(url);\n\n        socket.onopen = () => {\n            console.log('WebSocket connected');\n            socket.send(JSON.stringify({ type: 'setUsername', username }));\n        };\n\n        socket.onmessage = (event) => {\n            const data = JSON.parse(event.data);\n            if (data.type === 'playerList') {\n                setPlayers(data.players);\n            } else if (data.type === 'lobbyMessage') {\n                setMessage(data.message);\n            } else if (data.type === 'challengeReceived') {\n                setMessage(`Challenge received from ${data.challenger}`);\n                setChallengeStatus('received');\n            } else if (data.type === 'gameStarted') {\n                setMessage(`Game started with ${data.opponent}`);\n            } else if (data.type === 'challengeDeclined') {\n                setMessage(`${data.challenger} declined your challenge.`);\n            } else if (data.type === 'chatMessage') {\n                if (data.room === currentRoom) {\n                    setMessage((prevMessages) => prevMessages + `\\n${data.username}: ${data.message}`);\n                }\n            }\n        };\n\n        socket.onclose = () => {\n            console.log('WebSocket disconnected');\n        };\n\n        setWs(socket);\n\n        return () => {\n            socket.close();\n        };\n    }, [url, username]);\n\n    const sendMessage = (msg) => {\n        if (ws && ws.readyState === WebSocket.OPEN) {\n            ws.send(JSON.stringify(msg));\n        }\n    };\n\n    const sendChallenge = (challengedPlayer) => {\n        sendMessage({ type: 'challenge', challengedPlayer });\n    };\n\n    const respondToChallenge = (response, challenger) => {\n        sendMessage({ type: 'challengeResponse', response, challenger });\n    };\n\n    return { players, message, challengeStatus, sendChallenge, respondToChallenge };\n};\n\nexport default useWebSocket;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}